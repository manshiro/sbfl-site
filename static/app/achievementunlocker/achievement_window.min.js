!function(t,i){for(var e in i)t[e]=i[e]}(window,function(t){var i={};function e(n){if(i[n])return i[n].exports;var h=i[n]={i:n,l:!1,exports:{}};return t[n].call(h.exports,h,h.exports,e),h.l=!0,h.exports}return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)e.d(n,h,function(i){return t[i]}.bind(null,h));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";function n(t,i,e){const n=e.maxWidth||Number.MAX_VALUE,h=e.fontFamily||"sans-serif",s=e.fontSizePixel||12,o=e.maxLines||1e3,a=[],d=Array.from(i.replace(/\r\n|\r(?!\n)/g,"\n")),c=/\s/.test(h)?`"${h}"`:h;t.font=`${s}px ${c}, sans-serif`;let l="",r=0;for(;d.length>0&&r<o;){const i=d.shift();if("\n"===i){a.push(l),l="",r++;continue}const e=t.measureText(l+i);n&&e.width>n&&(a.push(l),l="",r++),l+=i}return l&&a.push(l),a}function h(t,i,e,n,h){const s=h.fontFamily||"sans-serif",o=h.lineHeight||1,a=h.fontSizePixel||12,d=/\s/.test(s)?`"${s}"`:s;t.font=`${a}px ${d}, sans-serif`;const c=a*o;for(let h=0;h<i.length;h++){const s=i[h];t.fillText(s,e,n+c*h)}}e.r(i),e.d(i,"NineSlice",function(){return s}),e.d(i,"AchievementWindow",function(){return o});class s{constructor(t,i,e=null){this._image=t,this._slicePadding="object"==typeof i?i:{top:i,bottom:i,left:i,right:i},this._createCanvas=e||((t,i)=>{const e=document.createElement("canvas");return e.width=t,e.height=i,e}),this.x=0,this.y=0,this.width=t.width,this.height=t.height}render(t){const i=this._createCanvas(this.width,this.height),e=i.getContext("2d"),n={width:this._image.width,height:this._image.height,topLeft:{x:this._slicePadding.left,y:this._slicePadding.top},topRight:{x:this._image.width-this._slicePadding.right,y:this._slicePadding.top},bottomLeft:{x:this._slicePadding.left,y:this._image.height-this._slicePadding.bottom},bottomRight:{x:this._image.width-this._slicePadding.right,y:this._image.height-this._slicePadding.bottom},centerRect:{x:this._slicePadding.left,y:this._slicePadding.top,width:this._image.width-this._slicePadding.left-this._slicePadding.right,height:this._image.height-this._slicePadding.top-this._slicePadding.bottom}},h={width:this.width,height:this.height,topLeft:{x:n.topLeft.x,y:n.topLeft.y},topRight:{x:this.width-this._slicePadding.right,y:n.topRight.y},bottomLeft:{x:n.bottomLeft.x,y:this.height-this._slicePadding.bottom},bottomRight:{x:this.width-this._slicePadding.right,y:this.height-this._slicePadding.bottom},centerRect:{x:n.topLeft.x,y:n.topLeft.y,width:this.width-this._slicePadding.left-this._slicePadding.right,height:this.height-this._slicePadding.top-this._slicePadding.bottom}};e.drawImage(this._image,0,0,n.topLeft.x,n.topLeft.y,this.x,this.y,n.topLeft.x,n.topLeft.y),e.drawImage(this._image,0,n.topLeft.y,n.topLeft.x,n.centerRect.height,this.x,h.topLeft.y,n.topLeft.x,h.centerRect.height),e.drawImage(this._image,0,n.bottomLeft.y,n.bottomLeft.x,this._slicePadding.bottom,this.x,h.bottomLeft.y,n.bottomLeft.x,this._slicePadding.bottom),e.drawImage(this._image,n.bottomLeft.x,n.bottomLeft.y,n.centerRect.width,this._slicePadding.bottom,h.bottomLeft.x,h.bottomLeft.y,h.centerRect.width,this._slicePadding.bottom),e.drawImage(this._image,n.bottomRight.x,n.bottomRight.y,this._slicePadding.right,this._slicePadding.bottom,h.bottomRight.x,h.bottomRight.y,this._slicePadding.right,this._slicePadding.bottom),e.drawImage(this._image,n.topRight.x,n.topRight.y,this._slicePadding.right,n.centerRect.height,h.topRight.x,h.topRight.y,h.centerRect.width,h.centerRect.height),e.drawImage(this._image,n.topRight.x,0,this._slicePadding.right,this._slicePadding.top,h.topRight.x,this.y,this._slicePadding.right,this._slicePadding.top),e.drawImage(this._image,n.centerRect.x,n.centerRect.y,n.centerRect.width,n.centerRect.y,h.centerRect.x,this.y,h.centerRect.width,this._slicePadding.top),e.drawImage(this._image,n.centerRect.x,n.centerRect.y,n.centerRect.width,n.centerRect.height,h.centerRect.x,h.centerRect.y,h.centerRect.width,h.centerRect.height),t.drawImage(i,0,0,this.width,this.height,this.x,this.y,this.width,this.height)}}class o{constructor(t,i,e){this.width=t,this.height=i,this._title="title"in e?e.title:"実績のロックを解除しました！",this._content="content"in e?e.content:"",this._iconImage=e.iconImage||new Image,this._maskNineSlice=e.maskNineSlice,this._backgroundColor="backgroundColor"in e?e.backgroundColor:"rgb(40, 40, 40)",this._titleTextColor="titleTextColor"in e?e.titleTextColor:"rgb(240, 240, 250)",this._contentTextColor="contentTextColor"in e?e.contentTextColor:"rgb(200, 200, 200)",this._fontFamily=e.fontFamily||"sans-serif",this._padding=30,this._marginBetweenIconAndBody=15,this._marginBetweenTitleAndContent=30,this._lineHeight=1.3,this._fontSizePixel=28,this._titleMaxLines=2,this._contentMaxLines=7}_calcIconSize(){const t=this.height-2*this._padding;return Math.min(.15*this.width,t)}_calcBodyWidth(t){return this.width-2*this._padding-t-this._marginBetweenIconAndBody}resizeToFitVertical(t){const i=this._calcIconSize(),e=this._calcBodyWidth(i),h=Math.round(i+2*this._padding),s=n(t,this._title,{fontFamily:this._fontFamily,fontSizePixel:this._fontSizePixel,maxWidth:e,maxLines:this._titleMaxLines}),o=n(t,this._content,{fontFamily:this._fontFamily,fontSizePixel:this._fontSizePixel,maxWidth:e,maxLines:this._contentMaxLines}),a=(s.length+o.length)*this._lineHeight*this._fontSizePixel,d=Math.round(a+2*this._padding+this._marginBetweenTitleAndContent);this.height=Math.max(h,d)}render(t){t.globalCompositeOperation="source-over",t.fillStyle=this._backgroundColor,t.fillRect(0,0,this.width,this.height);const i=this._calcIconSize();t.drawImage(this._iconImage,this._padding,this._padding,i,i);const e=this._padding+i+this._marginBetweenIconAndBody,s=this._calcBodyWidth(i);t.fillStyle=this._titleTextColor,t.textBaseline="top";const o=n(t,this._title,{fontFamily:this._fontFamily,fontSizePixel:this._fontSizePixel,maxWidth:s,maxLines:this._titleMaxLines});h(t,o,e,this._padding,{fontFamily:this._fontFamily,fontSizePixel:this._fontSizePixel,lineHeight:this._lineHeight});const a=o.length*this._fontSizePixel*this._lineHeight;t.fillStyle=this._contentTextColor,t.textBaseline="top",h(t,n(t,this._content,{fontFamily:this._fontFamily,fontSizePixel:this._fontSizePixel,maxWidth:s,maxLines:this._contentMaxLines}),e,this._padding+a+this._marginBetweenTitleAndContent,{fontFamily:this._fontFamily,fontSizePixel:this._fontSizePixel,lineHeight:this._lineHeight}),this._maskNineSlice&&(t.globalCompositeOperation="destination-in",t.fillStyle="black",this._maskNineSlice.width=this.width,this._maskNineSlice.height=this.height,this._maskNineSlice.render(t))}}}]));